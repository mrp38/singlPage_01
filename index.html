<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welcome Page</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        .fade {
            transition: opacity 0.2s ease;
            opacity: 1;
        }

        .fade.out {
            opacity: 0;
        }


        html, body {
            margin: 0;
            padding: 0;
            background-color: hwb(302 20% 61%);
            font-family: Arial, sans-serif;
            height: 100%;
        }
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            display: flex;
            gap: 20px;
            padding: 30px;
            background-color: hsl(115, 63%, 35%);
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }

        .left, .right {
            flex: 1;
            padding: 30px;
            background-color: #f7e89f;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .left h2 {
            margin: 0 0 10px;
            font-size: 3rem;
            color: #343a40;
        }

        .left img {
            width: 100%;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
        }

        .left p {
            font-size: 2rem;
            color: #495057;
            margin-top: 15px;
        }

        .right .bubble {
            background-color: #fff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 2rem;
            text-align: center;
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .right img {
            width: 100%;
            object-fit: contain;
            border-radius: 10px;
        }

        .right .buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .right button {
            width: 100%;
            padding: 15px 20px;
            font-size: 2rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            transition: background-color 0.3s;
        }

        .right button:hover {
            background-color: #0056b3;
        }

        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="left">
            <div>
                <h2>Interesting Item</h2>
                <a id="link" href="page2.html"> // —Å—Å—ã–ª–∫—É –∫–ª–∞—Å—Ç—å —Å—é–¥–∞
                    <img src="images/todays_item.png" alt="Clickable Image">
                </a>
                <p>This is a brief description of the item. Click the image to learn more.</p>
            </div>
        </div>
        <div class="right">
            <div class="bubble" id="bubble">
                Hello my friend, today I brought you something interesting.
            </div>
            <img class="fade" src="images/character.png" alt="Character Sprite">
            <div class="buttons">
                <button onclick="handleYes()">Yes</button>
                <button onclick="handleNo()">No</button>
            </div>
        </div>
    </div>

    <script>
        let messages = [];
        let currentRow = 0;
    
        const imageNames = [
            'char01_01.png',
            'char01_02.png',
            'char01_03.png',
            'char01_04.png',
            'char01_05.png'
        ];
    
        async function loadMessages() {
            try {
                const res = await fetch('messages.json');
                messages = await res.json();
            } catch (error) {
                console.error('Failed to load messages:', error);
            }
        }
    
        async function init() {
            await loadMessages();

            // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            const img = document.querySelector(".right img");
            img.src = `images/${imageNames[0]}`;
        }
    
        function handleNo() {
            
            // if (messages.length === 0) return;

            // const bubble = document.getElementById("bubble");
            // const img = document.querySelector(".right img");

            // const col = Math.random() < 0.5 ? 0 : 1;
            // const message = messages[currentRow][col];
            // bubble.textContent = message;

            // // –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            // const imageIndex = currentRow % imageNames.length;
            // const newSrc = `images/${imageNames[imageIndex]}`;

            // // 1. –£–±–∏—Ä–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
            // img.classList.add("out");

            // // 2. –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ (—á—Ç–æ–±—ã –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–ª–∞—Å—å)
            // img.addEventListener("transitionend", function onTransition() {
            //     // –°–º–µ–Ω–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –æ–Ω–æ —É–∂–µ —Å—Ç–∞–ª–æ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º
            //     img.src = newSrc;

            //     // –í–µ—Ä–Ω—ë–º –≤–∏–¥–∏–º–æ—Å—Ç—å
            //     img.classList.remove("out");

            //     // –£–¥–∞–ª–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–∏–Ω–∞—á–µ –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ)
            //     img.removeEventListener("transitionend", onTransition);
            // });

            // currentRow = (currentRow + 1) % messages.length;
            if (messages.length === 0) return;

            const bubble = document.getElementById("bubble");
            const img = document.querySelector(".right img");

            const col = Math.random() < 0.5 ? 0 : 1;
            const message = messages[currentRow][col];
            bubble.textContent = message;

            // üé≤ –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const imageIndex = Math.floor(Math.random() * imageNames.length);
            const newSrc = `images/${imageNames[imageIndex]}`;

            // –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            img.classList.add("out");
            img.addEventListener("transitionend", function onTransition() {
                img.src = newSrc;
                img.classList.remove("out");
                img.removeEventListener("transitionend", onTransition);
            });

            currentRow = (currentRow + 1) % messages.length;

            
        }
    
        function handleYes() {
            const link = document.getElementById("link");
            window.location.href = link.href;
        }
    
        init();
    </script>
    
</body>
</html>
